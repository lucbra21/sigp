<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login/SIGP</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/unicons/4.0.0/css/line.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../static/css/auth_light.css">
    <style>
      body{
        background:url('{{ url_for('static', filename='img/fondo8.jpg') }}') no-repeat center center fixed;
        background-size:cover;
      }
      /* Estilos para el modal dark mode */
      .modal-content-dark {
          background-color: #2a2b38;
          color: #c4c3ca;
          border: 1px solid #ffeba7;
      }
      .form-style-modal {
          background-color: #1f2029;
          border: none;
          color: #fff;
          padding: 10px;
          border-radius: 4px;
      }
      .form-style-modal:focus {
          background-color: #1f2029;
          color: #fff;
          box-shadow: 0 0 0 2px #ffeba7;
      }
      /* Ocultamos el input real para que no moleste */
      .hidden-input {
          display: none !important;
      }

      /* Dibujamos el cuadradito nosotros mismos */
      .custom-checkmark {
          width: 22px;
          height: 22px;
          background-color: #1f2029; /* Fondo oscuro */
          border: 1px solid #ffeba7; /* Borde dorado */
          border-radius: 4px;
          display: inline-flex;      /* Para centrar el tilde */
          align-items: center;
          justify-content: center;
          margin-right: 10px;
          cursor: pointer;
          flex-shrink: 0;            /* Evita que se aplaste */
          transition: all 0.2s;
      }

      /* Cuando el input real (oculto) está marcado, pintamos el cuadradito */
      .hidden-input:checked + .custom-checkmark {
          background-color: #ffeba7;
      }

      /* Dibujamos el tilde (✔) */
      .hidden-input:checked + .custom-checkmark::after {
          content: '✔';
          color: #2a2b38; /* Color oscuro */
          font-size: 14px;
          font-weight: bold;
      }
    </style>
</head>
<body>
    <div class="section">
        <div class="container">
            <h1 class="fw-semibold text-center " style="font-size:2.8rem; margin-top: 10vh; margin-bottom: 1vh;">Sistema Integral de Gestión de Prescriptores <br>(SIGP)</h1>

            <div class="row justify-content-center">
                <div class="col-12 text-center align-self-center py-5">
                    <div class="section pb-5 pt-5 pt-sm-2 text-center">
                        <h6 class="mb-0 pb-3"><span>Ingresar </span><span>Contactanos</span></h6>
                        <input class="checkbox" type="checkbox" id="reg-log" name="reg-log"/>
                        <label for="reg-log"></label>
                        <div class="card-3d-wrap mx-auto">
                            <div class="card-3d-wrapper">
                                <div class="card-front">
                                    <div class="center-wrap">
                                        
                                            <div class="section text-center">
                                                <h4 class="mb-4 pb-3">Iniciar Sesión</h4>
                                                <form id="loginForm" method="post">
                                                    {{ form.csrf_token }}
                                                    <div class="form-group">
                                                        {{ form.email(class="form-style", placeholder="Tu Email", autocomplete="off") }}
                                                        <i class="input-icon uil uil-at"></i>
                                                    </div>	
                                                    <div class="form-group mt-2">
                                                        {{ form.password(class="form-style", placeholder="Tu Contraseña", autocomplete="off") }}
                                                        <i class="input-icon uil uil-lock-alt"></i>
                                                    </div>
                                                    <div class="form-check mb-3 mt-3">
                                                        {{ form.remember(style="left: 100px; margin-top: -3px; accent-color: #6c757d !important; border-color: #6c757d !important; background-color: #6c757d !important;",class="checkbox-gray")  }}
                                                        {{ form.remember.label(class="form-check-label") }}
                                                    </div>
                                                    {{ form.submit(class="btn mt-4") }}
                                                    
                                                    <p class="mb-0 mt-4 text-center">
                                                        <a href="{{ url_for('auth.forgot_get') }}" class="link" style="color: #a2a1a6 !important;">¿Olvidaste tu contraseña?</a>
                                                    </p>
                                                    <p class="mb-0 mt-3 text-center">
                                                        <a href="{{ url_for('public.signup_get') }}" class="link fw-bold" style="color: #000000 !important;">
                                                            ¿Deseas ser prescriptor? <br> <span style="border-bottom: 1px dotted #ffeba7;">¡Inscríbete aquí!</span>
                                                        </a>
                                                    </p>
                                                    <!-- <p class="mb-0 mt-3 text-center">
                                                        <a href="#" data-bs-toggle="modal" data-bs-target="#signupModal" class="link fw-bold" style="color: #000000 !important; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); text-decoration: none;">
                                                            ¿Deseas ser prescriptor? <br> <span style="border-bottom: 1px dotted #ffeba7;">¡Inscríbete aquí!</span>
                                                        </a>
                                                    </p> -->
                                                </form>
                                            </div>
                                       
                                    </div>
                                </div>
                                <div class="card-back">
                                    <div class="center-wrap">
                                        <div class="section text-center">
                                            <h4 class="mb-4 pb-3">Contactanos</h4>
                                            <form id="contactForm" method="post" action="{{ url_for('auth.contact_post') }}">{{ form.csrf_token }}
                                             <div class="form-group">
                                                 <input type="text" name="name" class="form-style" placeholder="Nombre completo" autocomplete="off" required>
                                                 <i class="input-icon uil uil-user"></i>
                                             </div>
                                            <div class="form-group mt-2">
                                                <input type="email" name="email" class="form-style" placeholder="Tu email" autocomplete="off" required>
                                                <i class="input-icon uil uil-at"></i>
                                            </div>	
                                            <div class="form-group mt-2">
                                                <textarea name="message" class="form-style" placeholder="Cuéntanos..." rows="4" required></textarea>
                                                <i class="input-icon uil uil-lock-alt"></i>
                                            </div>
                                            <button type="submit" class="btn mt-4">Enviar</button>
                                             </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<div id="loginLoading" class="position-fixed top-0 start-0 w-100 h-100 d-none justify-content-center align-items-center" style="background:rgba(255,255,255,.7);z-index:1050;">
  <img src="{{ url_for('static', filename='img/loader.gif') }}" alt="cargando...">
</div>



<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function(){
    const overlay = document.getElementById('loginLoading');
    const form = document.getElementById('loginForm');
    
    if(form){
      form.addEventListener('submit', function(){
        overlay.classList.remove('d-none');
        overlay.classList.add('d-flex');
      });
    }
    const cform=document.getElementById('contactForm');
    if(cform){cform.addEventListener('submit',()=>{overlay.classList.remove('d-none');overlay.classList.add('d-flex');});}
  });
</script>
</body>
</html>
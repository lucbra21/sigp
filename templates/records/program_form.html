{% extends 'layouts/base.html' %}
{% block title %}{{ 'Editar' if program else 'Nuevo' }} programa{% endblock %}
{% block content %}
<h2>{{ 'Editar' if program else 'Nuevo' }} programa</h2>
<form method="post">
  <div class="row">
    <div class="col-md-6 mb-3">
      <label class="form-label" for="name">Nombre</label>
      <input class="form-control" id="name" name="name" required value="{{ program.name if program else '' }}" />
    </div>
    <div class="col-md-6 mb-3">
      <label class="form-label" for="language">Idioma</label>
      <select class="form-select" id="language" name="language">
        {% set lang = program.language if program else '' %}
        <option value="Español" {{ 'selected' if lang=='Español' else '' }}>Español</option>
        <option value="Inglés" {{ 'selected' if lang in ['Inglés','Ingles'] else '' }}>Inglés</option>
        <option value="Portugués" {{ 'selected' if lang in ['Portugués','Portugues'] else '' }}>Portugués</option>
      </select>
    </div>
  </div>
  <div class="mb-3">
    <label class="form-label" for="description">Descripción</label>
    <textarea class="form-control" id="description" name="description">{{ program.description if program else '' }}</textarea>
  </div>
  <div class="row">
    <div class="col-md-4 mb-3">
      <label class="form-label" for="price_total">Precio total</label>
      <input class="form-control" id="price_total" name="price_total" type="number" step="0.01" value="{{ program.price_total if program else '' }}" />
    </div>
    <div class="col-md-4 mb-3">
      <label class="form-label" for="price_scholarship">Precio beca</label>
      <input class="form-control" id="price_scholarship" name="price_scholarship" type="number" step="0.01" value="{{ program.price_scholarship if program else '' }}" />
    </div>
    <div class="col-md-4 mb-3">
      <label class="form-label" for="commission_value">Comisión</label>
      <input class="form-control" id="commission_value" name="commission_value" type="number" step="0.01" value="{{ program.commission_value if program else '' }}" />
    </div>
  </div>
  <div class="row">
    <div class="col-md-4 mb-3">
      <label class="form-label" for="first_installment_pct">% 1ª cuota</label>
      <input class="form-control" id="first_installment_pct" name="first_installment_pct" type="number" step="0.01" value="{{ program.first_installment_pct if program else '' }}" />
    </div>
    <div class="col-md-4 mb-3">
      <label class="form-label" for="pvp">PVP</label>
      <input class="form-control" id="pvp" name="pvp" type="number" step="0.01" value="{{ program.pvp if program else '' }}" />
    </div>
    <div class="col-md-4 mb-3">
      <label class="form-label" for="value_quotas">Monto cuotas</label>
      <input class="form-control" id="value_quotas" name="value_quotas" type="number" step="0.01" value="{{ program.value_quotas if program else '' }}" />
    </div>
  </div>
  <div class="row">
    <div class="col-md-4 mb-3">
      <label class="form-label" for="scholarship_value">Valor beca</label>
      <input class="form-control" id="scholarship_value" name="scholarship_value" type="number" step="0.01" value="{{ program.scholarship_value if program else '' }}" />
    </div>
    <div class="col-md-4 mb-3">
      <label class="form-label" for="registration_value">Matrícula</label>
      <input class="form-control" id="registration_value" name="registration_value" type="number" step="0.01" value="{{ program.registration_value if program else '' }}" />
    </div>
    <div class="col-md-4 mb-3">
      <label class="form-label" for="level">Nivel</label>
      {% set lvl = program.level if program else '' %}
      <select class="form-select" id="level" name="level">
        {% for option in ['TITANIO','PLATINO','ORO','PLATA','BRONCE','BASE'] %}
        <option value="{{ option }}" {{ 'selected' if lvl==option else '' }}>{{ option }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <div class="mb-3">
    <label class="form-label" for="commercial_emails">Emails comerciales (separados por coma)</label>
    <textarea class="form-control" id="commercial_emails" name="commercial_emails" rows="2" placeholder="email1@example.com, email2@example.com">{{ program.commercial_emails if program else '' }}</textarea>
  </div>
  <div class="mb-3">
    <label class="form-label" for="state">Estado</label>
    {% set st = program.state if program else 'Activo' %}
    <select class="form-select" id="state" name="state">
      <option value="Activo" {{ 'selected' if st=='Activo' else '' }}>Activo</option>
      <option value="Desactivado" {{ 'selected' if st=='Desactivado' else '' }}>Desactivado</option>
    </select>
  </div>
  <button type="submit" class="btn btn-primary">Guardar</button>
  <a href="{{ url_for('programs.programs_list') }}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}
